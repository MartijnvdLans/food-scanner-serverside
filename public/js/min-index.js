if(document.querySelector(".videoOn")){let e=document.querySelector("video");getCamera(e)}async function getCamera(){let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1}),t=document.querySelector("video");t.srcObject=e,await t.play(),detectBarcode(t)}function detectBarcode(e){let t=new BarcodeDetector;window.setInterval(async()=>{let r=await t.detect(e);!(r.length<=0)&&(window.location.href="/product/"+r[0].rawValue)},1e3)}"serviceWorker"in navigator&&navigator.serviceWorker.register("/serviceWorker.js").then(function(e){console.log("Successfully registered service worker",e)}).catch(function(e){console.warn("Error whilst registering service worker",e)});let deferredPrompt;const addBtn=document.querySelector(".add-button");addBtn.style.display="none",window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),deferredPrompt=e,addBtn.style.display="block",addBtn.addEventListener("click",e=>{addBtn.style.display="none",deferredPrompt.prompt(),deferredPrompt.userChoice.then(e=>{"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),deferredPrompt=null})})});